<!DOCTYPE html><html lang="ko" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="winforms 에서 부드러운 둥근 모서리 만들기" /><meta property="og:locale" content="ko" /><meta name="description" content="해당 글 주소 creating-smooth-rounded-corners-in-winform-applications/" /><meta property="og:description" content="해당 글 주소 creating-smooth-rounded-corners-in-winform-applications/" /><link rel="canonical" href="https://hotkey.sh/posts/smooth-rounded-corners-in-winform/" /><meta property="og:url" content="https://hotkey.sh/posts/smooth-rounded-corners-in-winform/" /><meta property="og:site_name" content="Hotkey" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-01-01T10:27:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="winforms 에서 부드러운 둥근 모서리 만들기" /><meta name="twitter:site" content="@Hot_key_" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-01-01T10:27:00+09:00","datePublished":"2022-01-01T10:27:00+09:00","description":"해당 글 주소 creating-smooth-rounded-corners-in-winform-applications/","headline":"winforms 에서 부드러운 둥근 모서리 만들기","mainEntityOfPage":{"@type":"WebPage","@id":"https://hotkey.sh/posts/smooth-rounded-corners-in-winform/"},"url":"https://hotkey.sh/posts/smooth-rounded-corners-in-winform/"}</script><title>winforms 에서 부드러운 둥근 모서리 만들기 | Hotkey</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Hotkey"><meta name="application-name" content="Hotkey"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/20187669" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Hotkey</a></div><div class="site-subtitle font-italic">hotkey's blog</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/Hot-key" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/Hot_key_" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['hotkey.sh','gmail.con'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>winforms 에서 부드러운 둥근 모서리 만들기</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>winforms 에서 부드러운 둥근 모서리 만들기</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/Hot-key">Hotkey</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2022-01-01T10:27:00+09:00" data-toggle="tooltip" data-placement="bottom" title="Sat, Jan 1, 2022, 10:27 AM +0900" >Jan 1, 2022</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2330 words"> <em>12 min</em> read</span></div></div></div><div class="post-content"><p>해당 글 주소<br /> <a href="https://stackoverflow.com/questions/58903526/creating-smooth-rounded-corners-in-winform-applications/58906678#58906678">creating-smooth-rounded-corners-in-winform-applications/</a></p><p>윈폼에서 둥근 테두리에 관하여 검색하면 대부분의 결과가 CreateRoundRectRgn 를 이용한 방법이다.</p><p>하지만 CreateRoundRectRgn 를 이용하면 완벽하게 둥근 테두리가 아닌 눈으로 볼때 약간 어색할 수 있는 테두리가 나온다.</p><p><img data-src="/assets/img/post/dev/stackoverflow/smooth-rounded-corners-in-winform/CreateRoundRectRgn.png" alt="기존방식" data-proofer-ignore></p><p>이것을 더욱 선명하고 부드럽게 만들어 보자 일단 Win32api 를 이용하지 않고 둥근 사각형을 그려보자.</p><p>해당코드는 <a href="https://stackoverflow.com/questions/33853434/how-to-draw-a-rounded-rectangle-in-c-sharp/33853557">여기</a>를 참조하여 만들었다</p><p>2가지 메서드를 추가하고</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="k">static</span> <span class="n">GraphicsPath</span> <span class="nf">RoundedRect</span><span class="p">(</span><span class="n">Rectangle</span> <span class="n">bounds</span><span class="p">,</span> <span class="kt">int</span> <span class="n">radius</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">diameter</span> <span class="p">=</span> <span class="n">radius</span> <span class="p">*</span> <span class="m">2</span><span class="p">;</span>
    <span class="n">Size</span> <span class="n">size</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Size</span><span class="p">(</span><span class="n">diameter</span><span class="p">,</span> <span class="n">diameter</span><span class="p">);</span>
    <span class="n">Rectangle</span> <span class="n">arc</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Rectangle</span><span class="p">(</span><span class="n">bounds</span><span class="p">.</span><span class="n">Location</span><span class="p">,</span> <span class="n">size</span><span class="p">);</span>
    <span class="n">GraphicsPath</span> <span class="n">path</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">GraphicsPath</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">radius</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">path</span><span class="p">.</span><span class="nf">AddRectangle</span><span class="p">(</span><span class="n">bounds</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">path</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// top left arc  </span>
    <span class="n">path</span><span class="p">.</span><span class="nf">AddArc</span><span class="p">(</span><span class="n">arc</span><span class="p">,</span> <span class="m">180</span><span class="p">,</span> <span class="m">90</span><span class="p">);</span>

    <span class="c1">// top right arc  </span>
    <span class="n">arc</span><span class="p">.</span><span class="n">X</span> <span class="p">=</span> <span class="n">bounds</span><span class="p">.</span><span class="n">Right</span> <span class="p">-</span> <span class="n">diameter</span><span class="p">;</span>
    <span class="n">path</span><span class="p">.</span><span class="nf">AddArc</span><span class="p">(</span><span class="n">arc</span><span class="p">,</span> <span class="m">270</span><span class="p">,</span> <span class="m">90</span><span class="p">);</span>

    <span class="c1">// bottom right arc  </span>
    <span class="n">arc</span><span class="p">.</span><span class="n">Y</span> <span class="p">=</span> <span class="n">bounds</span><span class="p">.</span><span class="n">Bottom</span> <span class="p">-</span> <span class="n">diameter</span><span class="p">;</span>
    <span class="n">path</span><span class="p">.</span><span class="nf">AddArc</span><span class="p">(</span><span class="n">arc</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">90</span><span class="p">);</span>

    <span class="c1">// bottom left arc </span>
    <span class="n">arc</span><span class="p">.</span><span class="n">X</span> <span class="p">=</span> <span class="n">bounds</span><span class="p">.</span><span class="n">Left</span><span class="p">;</span>
    <span class="n">path</span><span class="p">.</span><span class="nf">AddArc</span><span class="p">(</span><span class="n">arc</span><span class="p">,</span> <span class="m">90</span><span class="p">,</span> <span class="m">90</span><span class="p">);</span>

    <span class="n">path</span><span class="p">.</span><span class="nf">CloseFigure</span><span class="p">();</span>
    <span class="k">return</span> <span class="n">path</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">FillRoundedRectangle</span><span class="p">(</span><span class="n">Graphics</span> <span class="n">graphics</span><span class="p">,</span> <span class="n">Brush</span> <span class="n">brush</span><span class="p">,</span> <span class="n">Rectangle</span> <span class="n">bounds</span><span class="p">,</span> <span class="kt">int</span> <span class="n">cornerRadius</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">graphics</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentNullException</span><span class="p">(</span><span class="s">"graphics"</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">brush</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentNullException</span><span class="p">(</span><span class="s">"brush"</span><span class="p">);</span>

    <span class="k">using</span> <span class="p">(</span><span class="n">GraphicsPath</span> <span class="n">path</span> <span class="p">=</span> <span class="nf">RoundedRect</span><span class="p">(</span><span class="n">bounds</span><span class="p">,</span> <span class="n">cornerRadius</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">graphics</span><span class="p">.</span><span class="nf">FillPath</span><span class="p">(</span><span class="n">brush</span><span class="p">,</span> <span class="n">path</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>부드러운 효과를 주기 안티 앨리어싱을 사용한다.<br /> 이를 위해 <code class="language-plaintext highlighter-rouge">graphics.SmoothingMode</code>로 <code class="language-plaintext highlighter-rouge">SmoothingMode.HighQuality</code> 를 이용한다.<br /> 안티 앨리어싱과 관련한 글은 <a href="https://docs.microsoft.com/en-us/dotnet/framework/winforms/advanced/antialiasing-with-lines-and-curves">여기</a>서 볼수 있다.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="k">private</span> <span class="k">void</span> <span class="nf">Form1_Paint</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">PaintEventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Graphics</span> <span class="n">graphics</span> <span class="p">=</span> <span class="n">e</span><span class="p">.</span><span class="n">Graphics</span><span class="p">;</span>

    <span class="n">Rectangle</span> <span class="n">gradientRectangle</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Rectangle</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">Width</span> <span class="p">-</span> <span class="m">1</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">Height</span> <span class="p">-</span> <span class="m">1</span><span class="p">);</span>

    <span class="n">Brush</span> <span class="n">b</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">LinearGradientBrush</span><span class="p">(</span><span class="n">gradientRectangle</span><span class="p">,</span> <span class="n">Color</span><span class="p">.</span><span class="n">DarkSlateBlue</span><span class="p">,</span> <span class="n">Color</span><span class="p">.</span><span class="n">MediumPurple</span><span class="p">,</span> <span class="m">0.0f</span><span class="p">);</span>

    <span class="n">graphics</span><span class="p">.</span><span class="n">SmoothingMode</span> <span class="p">=</span> <span class="n">SmoothingMode</span><span class="p">.</span><span class="n">HighQuality</span><span class="p">;</span>
    <span class="nf">FillRoundedRectangle</span><span class="p">(</span><span class="n">graphics</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">gradientRectangle</span><span class="p">,</span> <span class="m">35</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p>여기까지 끝나면 위의 방식보다 둥근 사각형을 얻을 수 있다.</p><p><img data-src="/assets/img/post/dev/stackoverflow/smooth-rounded-corners-in-winform/smoothRounded1.png" alt="둥근 사각형" data-proofer-ignore></p><p>그러면 이제 꼭짓점 부분을 투명하게 만들어 보자.</p><p>해당 코드는 <a href="https://www.codeproject.com/Articles/1822/Per-Pixel-Alpha-Blend-in-C">여기</a>를 참고하여 만들었다.</p><p>우리는 꼭짓점 부분을 투명하게 만들기 위하여 Per Pixel Alpha Blend를 이용할 것 이다.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="k">void</span> <span class="nf">SetBitmap</span><span class="p">(</span><span class="n">Bitmap</span> <span class="n">bitmap</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nf">SetBitmap</span><span class="p">(</span><span class="n">bitmap</span><span class="p">,</span> <span class="m">255</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">void</span> <span class="nf">SetBitmap</span><span class="p">(</span><span class="n">Bitmap</span> <span class="n">bitmap</span><span class="p">,</span> <span class="kt">byte</span> <span class="n">opacity</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">bitmap</span><span class="p">.</span><span class="n">PixelFormat</span> <span class="p">!=</span> <span class="n">PixelFormat</span><span class="p">.</span><span class="n">Format32bppArgb</span><span class="p">)</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">ApplicationException</span><span class="p">(</span><span class="s">"The bitmap must be 32ppp with alpha-channel."</span><span class="p">);</span>


    <span class="n">IntPtr</span> <span class="n">screenDc</span> <span class="p">=</span> <span class="n">Win32</span><span class="p">.</span><span class="nf">GetDC</span><span class="p">(</span><span class="n">IntPtr</span><span class="p">.</span><span class="n">Zero</span><span class="p">);</span>
    <span class="n">IntPtr</span> <span class="n">memDc</span> <span class="p">=</span> <span class="n">Win32</span><span class="p">.</span><span class="nf">CreateCompatibleDC</span><span class="p">(</span><span class="n">screenDc</span><span class="p">);</span>
    <span class="n">IntPtr</span> <span class="n">hBitmap</span> <span class="p">=</span> <span class="n">IntPtr</span><span class="p">.</span><span class="n">Zero</span><span class="p">;</span>
    <span class="n">IntPtr</span> <span class="n">oldBitmap</span> <span class="p">=</span> <span class="n">IntPtr</span><span class="p">.</span><span class="n">Zero</span><span class="p">;</span>

    <span class="k">try</span>
    <span class="p">{</span>
        <span class="n">hBitmap</span> <span class="p">=</span> <span class="n">bitmap</span><span class="p">.</span><span class="nf">GetHbitmap</span><span class="p">(</span><span class="n">Color</span><span class="p">.</span><span class="nf">FromArgb</span><span class="p">(</span><span class="m">0</span><span class="p">));</span>
        <span class="n">oldBitmap</span> <span class="p">=</span> <span class="n">Win32</span><span class="p">.</span><span class="nf">SelectObject</span><span class="p">(</span><span class="n">memDc</span><span class="p">,</span> <span class="n">hBitmap</span><span class="p">);</span>

        <span class="n">Win32</span><span class="p">.</span><span class="n">Size</span> <span class="n">size</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Win32</span><span class="p">.</span><span class="nf">Size</span><span class="p">(</span><span class="n">bitmap</span><span class="p">.</span><span class="n">Width</span><span class="p">,</span> <span class="n">bitmap</span><span class="p">.</span><span class="n">Height</span><span class="p">);</span>
        <span class="n">Win32</span><span class="p">.</span><span class="n">Point</span> <span class="n">pointSource</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Win32</span><span class="p">.</span><span class="nf">Point</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
        <span class="n">Win32</span><span class="p">.</span><span class="n">Point</span> <span class="n">topPos</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Win32</span><span class="p">.</span><span class="nf">Point</span><span class="p">(</span><span class="n">Left</span><span class="p">,</span> <span class="n">Top</span><span class="p">);</span>
        <span class="n">Win32</span><span class="p">.</span><span class="n">BLENDFUNCTION</span> <span class="n">blend</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Win32</span><span class="p">.</span><span class="nf">BLENDFUNCTION</span><span class="p">();</span>
        <span class="n">blend</span><span class="p">.</span><span class="n">BlendOp</span> <span class="p">=</span> <span class="n">Win32</span><span class="p">.</span><span class="n">AC_SRC_OVER</span><span class="p">;</span>
        <span class="n">blend</span><span class="p">.</span><span class="n">BlendFlags</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
        <span class="n">blend</span><span class="p">.</span><span class="n">SourceConstantAlpha</span> <span class="p">=</span> <span class="n">opacity</span><span class="p">;</span>
        <span class="n">blend</span><span class="p">.</span><span class="n">AlphaFormat</span> <span class="p">=</span> <span class="n">Win32</span><span class="p">.</span><span class="n">AC_SRC_ALPHA</span><span class="p">;</span>

        <span class="n">Win32</span><span class="p">.</span><span class="nf">UpdateLayeredWindow</span><span class="p">(</span><span class="n">Handle</span><span class="p">,</span> <span class="n">screenDc</span><span class="p">,</span> <span class="k">ref</span> <span class="n">topPos</span><span class="p">,</span> <span class="k">ref</span> <span class="n">size</span><span class="p">,</span> <span class="n">memDc</span><span class="p">,</span> <span class="k">ref</span> <span class="n">pointSource</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="k">ref</span> <span class="n">blend</span><span class="p">,</span> <span class="n">Win32</span><span class="p">.</span><span class="n">ULW_ALPHA</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">finally</span>
    <span class="p">{</span>
        <span class="n">Win32</span><span class="p">.</span><span class="nf">ReleaseDC</span><span class="p">(</span><span class="n">IntPtr</span><span class="p">.</span><span class="n">Zero</span><span class="p">,</span> <span class="n">screenDc</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">hBitmap</span> <span class="p">!=</span> <span class="n">IntPtr</span><span class="p">.</span><span class="n">Zero</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Win32</span><span class="p">.</span><span class="nf">SelectObject</span><span class="p">(</span><span class="n">memDc</span><span class="p">,</span> <span class="n">oldBitmap</span><span class="p">);</span>
            <span class="n">Win32</span><span class="p">.</span><span class="nf">DeleteObject</span><span class="p">(</span><span class="n">hBitmap</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="n">Win32</span><span class="p">.</span><span class="nf">DeleteDC</span><span class="p">(</span><span class="n">memDc</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">protected</span> <span class="k">override</span> <span class="n">CreateParams</span> <span class="n">CreateParams</span>
<span class="p">{</span>
    <span class="k">get</span>
    <span class="p">{</span>
        <span class="n">CreateParams</span> <span class="n">cp</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="n">CreateParams</span><span class="p">;</span>
        <span class="n">cp</span><span class="p">.</span><span class="n">ExStyle</span> <span class="p">|=</span> <span class="m">0x00080000</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">cp</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>위에 있는 메서드를 추가하고 <code class="language-plaintext highlighter-rouge">Form Load</code> 부분에 해당 코드를 추가한다.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="k">private</span> <span class="k">void</span> <span class="nf">Form1_Load</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Bitmap</span> <span class="n">myBitmap</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Bitmap</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">Width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">Height</span><span class="p">);</span>

    <span class="n">Graphics</span> <span class="n">graphics</span> <span class="p">=</span> <span class="n">Graphics</span><span class="p">.</span><span class="nf">FromImage</span><span class="p">(</span><span class="n">myBitmap</span><span class="p">);</span>

    <span class="n">Rectangle</span> <span class="n">gradientRectangle</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Rectangle</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">Width</span> <span class="p">-</span> <span class="m">1</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">Height</span> <span class="p">-</span> <span class="m">1</span><span class="p">);</span>

    <span class="n">Brush</span> <span class="n">b</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">LinearGradientBrush</span><span class="p">(</span><span class="n">gradientRectangle</span><span class="p">,</span> <span class="n">Color</span><span class="p">.</span><span class="n">DarkSlateBlue</span><span class="p">,</span> <span class="n">Color</span><span class="p">.</span><span class="n">MediumPurple</span><span class="p">,</span> <span class="m">0.0f</span><span class="p">);</span>

    <span class="n">graphics</span><span class="p">.</span><span class="n">SmoothingMode</span> <span class="p">=</span> <span class="n">SmoothingMode</span><span class="p">.</span><span class="n">HighQuality</span><span class="p">;</span>
    <span class="nf">FillRoundedRectangle</span><span class="p">(</span><span class="n">graphics</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">gradientRectangle</span><span class="p">,</span> <span class="m">35</span><span class="p">);</span>

    <span class="nf">SetBitmap</span><span class="p">(</span><span class="n">myBitmap</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p>해당코드는 폼 사이즈와 동일한 Bitmap을 만들고 그 위에 둥근 사각형을 그리는 것 이다.</p><p><img data-src="/assets/img/post/dev/stackoverflow/smooth-rounded-corners-in-winform/smoothRounded2.png" alt="둥근 사각형" data-proofer-ignore></p><p>다 완성한것 같지만 여기서 폼을 투명하게 만들기 위하여 <code class="language-plaintext highlighter-rouge">CreateParams.ExStyle</code> 을 <code class="language-plaintext highlighter-rouge">WS_EX_LAYERED(0x00080000)</code> 으로 변경하였다.</p><p><a href="https://stackoverflow.com/questions/10202130/how-draw-a-control-over-a-ws-ex-layered-form">해당 글</a>을 이용하여 적어보자면</p><blockquote><p>UpdateLayeredWindow 를 사용하는 경우 응용 프로그램은 WM_PAINT 또는 기타 그림 메시지에 응답 할 필요가 없습니다. 이미 창에 대한 시각적 표현을 제공했으며 시스템에서 해당 이미지를 저장하고 구성하고 렌더링하는 작업을 처리하기 때문입니다. 화면. UpdateLayeredWindow 는 매우 강력하지만 종종 기존 Win32 응용 프로그램이 그리는 방식을 수정해야합니다.</p></blockquote><p>즉 해당 기능을 이용하면 폼 위에 있는 컨트롤이 자동적으로 그려지지 않는다는 것이다.</p><p>그러면 컨트롤을 수동으로 그려보자.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="k">foreach</span> <span class="p">(</span><span class="n">Control</span> <span class="n">ctrl</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="n">Controls</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">using</span> <span class="p">(</span><span class="n">Bitmap</span> <span class="n">bmp</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Bitmap</span><span class="p">(</span><span class="n">ctrl</span><span class="p">.</span><span class="n">Width</span><span class="p">,</span> <span class="n">ctrl</span><span class="p">.</span><span class="n">Height</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">Rectangle</span> <span class="n">rect</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Rectangle</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">ctrl</span><span class="p">.</span><span class="n">Width</span><span class="p">,</span> <span class="n">ctrl</span><span class="p">.</span><span class="n">Height</span><span class="p">);</span>
        <span class="n">ctrl</span><span class="p">.</span><span class="nf">DrawToBitmap</span><span class="p">(</span><span class="n">bmp</span><span class="p">,</span> <span class="n">rect</span><span class="p">);</span>
        <span class="n">graphics</span><span class="p">.</span><span class="nf">DrawImage</span><span class="p">(</span><span class="n">bmp</span><span class="p">,</span> <span class="n">ctrl</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>해당 코드를 이용해서 컨트롤을 수동으로 그릴 수 있다.</p><p>이를 연속적으로 그리기 위해서 <code class="language-plaintext highlighter-rouge">Timer</code> 를 이용해 보자.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
</pre><td class="rouge-code"><pre><span class="k">private</span> <span class="n">Timer</span> <span class="n">drawTimer</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Timer</span><span class="p">();</span>

 <span class="c1">// 폼 로드후 그리기 위해서 생성자가 아닌 OnLoad 에서 초기화 한다.</span>
<span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnLoad</span><span class="p">(</span><span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(!</span><span class="n">DesignMode</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">drawTimer</span><span class="p">.</span><span class="n">Interval</span> <span class="p">=</span> <span class="m">1000</span> <span class="p">/</span> <span class="m">60</span><span class="p">;</span>
        <span class="n">drawTimer</span><span class="p">.</span><span class="n">Tick</span> <span class="p">+=</span> <span class="n">DrawForm</span><span class="p">;</span>
        <span class="n">drawTimer</span><span class="p">.</span><span class="nf">Start</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">base</span><span class="p">.</span><span class="nf">OnLoad</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">DrawForm</span><span class="p">(</span><span class="kt">object</span> <span class="n">pSender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">pE</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">using</span> <span class="p">(</span><span class="n">Bitmap</span> <span class="n">backImage</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Bitmap</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">Width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">Height</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="k">using</span> <span class="p">(</span><span class="n">Graphics</span> <span class="n">graphics</span> <span class="p">=</span> <span class="n">Graphics</span><span class="p">.</span><span class="nf">FromImage</span><span class="p">(</span><span class="n">backImage</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="n">Rectangle</span> <span class="n">gradientRectangle</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Rectangle</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">Width</span> <span class="p">-</span> <span class="m">1</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">Height</span> <span class="p">-</span> <span class="m">1</span><span class="p">);</span>
            <span class="k">using</span> <span class="p">(</span><span class="n">Brush</span> <span class="n">b</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">LinearGradientBrush</span><span class="p">(</span><span class="n">gradientRectangle</span><span class="p">,</span> <span class="n">Color</span><span class="p">.</span><span class="n">DarkSlateBlue</span><span class="p">,</span> <span class="n">Color</span><span class="p">.</span><span class="n">MediumPurple</span><span class="p">,</span> <span class="m">0.0f</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">graphics</span><span class="p">.</span><span class="n">SmoothingMode</span> <span class="p">=</span> <span class="n">SmoothingMode</span><span class="p">.</span><span class="n">HighQuality</span><span class="p">;</span>

                <span class="n">RoundedRectangle</span><span class="p">.</span><span class="nf">FillRoundedRectangle</span><span class="p">(</span><span class="n">graphics</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">gradientRectangle</span><span class="p">,</span> <span class="m">35</span><span class="p">);</span>

                <span class="k">foreach</span> <span class="p">(</span><span class="n">Control</span> <span class="n">ctrl</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="n">Controls</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">using</span> <span class="p">(</span><span class="n">Bitmap</span> <span class="n">bmp</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Bitmap</span><span class="p">(</span><span class="n">ctrl</span><span class="p">.</span><span class="n">Width</span><span class="p">,</span> <span class="n">ctrl</span><span class="p">.</span><span class="n">Height</span><span class="p">))</span>
                    <span class="p">{</span>
                        <span class="n">Rectangle</span> <span class="n">rect</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Rectangle</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">ctrl</span><span class="p">.</span><span class="n">Width</span><span class="p">,</span> <span class="n">ctrl</span><span class="p">.</span><span class="n">Height</span><span class="p">);</span>
                        <span class="n">ctrl</span><span class="p">.</span><span class="nf">DrawToBitmap</span><span class="p">(</span><span class="n">bmp</span><span class="p">,</span> <span class="n">rect</span><span class="p">);</span>
                        <span class="n">graphics</span><span class="p">.</span><span class="nf">DrawImage</span><span class="p">(</span><span class="n">bmp</span><span class="p">,</span> <span class="n">ctrl</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="n">PerPixelAlphaBlend</span><span class="p">.</span><span class="nf">SetBitmap</span><span class="p">(</span><span class="n">backImage</span><span class="p">,</span> <span class="n">Left</span><span class="p">,</span> <span class="n">Top</span><span class="p">,</span> <span class="n">Handle</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>이를 바탕으로 만든 폼 코드이다.</p><details> <summary>코드 접기/펼치기 버튼</summary><div><div file="HotkeyRoundedForm.cs" class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="HotkeyRoundedForm.cs"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="k">class</span> <span class="nc">HotkeyRoundedForm</span> <span class="p">:</span> <span class="n">Form</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="n">Timer</span> <span class="n">drawTimer</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Timer</span><span class="p">();</span>

    <span class="k">public</span> <span class="nf">HotkeyRoundedForm</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="n">FormBorderStyle</span> <span class="p">=</span> <span class="n">FormBorderStyle</span><span class="p">.</span><span class="n">None</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnLoad</span><span class="p">(</span><span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(!</span><span class="n">DesignMode</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">drawTimer</span><span class="p">.</span><span class="n">Interval</span> <span class="p">=</span> <span class="m">1000</span> <span class="p">/</span> <span class="m">60</span><span class="p">;</span>
            <span class="n">drawTimer</span><span class="p">.</span><span class="n">Tick</span> <span class="p">+=</span> <span class="n">DrawForm</span><span class="p">;</span>
            <span class="n">drawTimer</span><span class="p">.</span><span class="nf">Start</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">base</span><span class="p">.</span><span class="nf">OnLoad</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">void</span> <span class="nf">DrawForm</span><span class="p">(</span><span class="kt">object</span> <span class="n">pSender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">pE</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">using</span> <span class="p">(</span><span class="n">Bitmap</span> <span class="n">backImage</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Bitmap</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">Width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">Height</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="k">using</span> <span class="p">(</span><span class="n">Graphics</span> <span class="n">graphics</span> <span class="p">=</span> <span class="n">Graphics</span><span class="p">.</span><span class="nf">FromImage</span><span class="p">(</span><span class="n">backImage</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">Rectangle</span> <span class="n">gradientRectangle</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Rectangle</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">Width</span> <span class="p">-</span> <span class="m">1</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">Height</span> <span class="p">-</span> <span class="m">1</span><span class="p">);</span>
                <span class="k">using</span> <span class="p">(</span><span class="n">Brush</span> <span class="n">b</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">LinearGradientBrush</span><span class="p">(</span><span class="n">gradientRectangle</span><span class="p">,</span> <span class="n">Color</span><span class="p">.</span><span class="n">DarkSlateBlue</span><span class="p">,</span> <span class="n">Color</span><span class="p">.</span><span class="n">MediumPurple</span><span class="p">,</span> <span class="m">0.0f</span><span class="p">))</span>
                <span class="p">{</span>
                    <span class="n">graphics</span><span class="p">.</span><span class="n">SmoothingMode</span> <span class="p">=</span> <span class="n">SmoothingMode</span><span class="p">.</span><span class="n">HighQuality</span><span class="p">;</span>

                    <span class="n">RoundedRectangle</span><span class="p">.</span><span class="nf">FillRoundedRectangle</span><span class="p">(</span><span class="n">graphics</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">gradientRectangle</span><span class="p">,</span> <span class="m">35</span><span class="p">);</span>

                    <span class="k">foreach</span> <span class="p">(</span><span class="n">Control</span> <span class="n">ctrl</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="n">Controls</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="k">using</span> <span class="p">(</span><span class="n">Bitmap</span> <span class="n">bmp</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Bitmap</span><span class="p">(</span><span class="n">ctrl</span><span class="p">.</span><span class="n">Width</span><span class="p">,</span> <span class="n">ctrl</span><span class="p">.</span><span class="n">Height</span><span class="p">))</span>
                        <span class="p">{</span>
                            <span class="n">Rectangle</span> <span class="n">rect</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Rectangle</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">ctrl</span><span class="p">.</span><span class="n">Width</span><span class="p">,</span> <span class="n">ctrl</span><span class="p">.</span><span class="n">Height</span><span class="p">);</span>
                            <span class="n">ctrl</span><span class="p">.</span><span class="nf">DrawToBitmap</span><span class="p">(</span><span class="n">bmp</span><span class="p">,</span> <span class="n">rect</span><span class="p">);</span>
                            <span class="n">graphics</span><span class="p">.</span><span class="nf">DrawImage</span><span class="p">(</span><span class="n">bmp</span><span class="p">,</span> <span class="n">ctrl</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">}</span>

                    <span class="n">PerPixelAlphaBlend</span><span class="p">.</span><span class="nf">SetBitmap</span><span class="p">(</span><span class="n">backImage</span><span class="p">,</span> <span class="n">Left</span><span class="p">,</span> <span class="n">Top</span><span class="p">,</span> <span class="n">Handle</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnPaint</span><span class="p">(</span><span class="n">PaintEventArgs</span> <span class="n">e</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">DesignMode</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Graphics</span> <span class="n">graphics</span> <span class="p">=</span> <span class="n">e</span><span class="p">.</span><span class="n">Graphics</span><span class="p">;</span>

            <span class="n">Rectangle</span> <span class="n">gradientRectangle</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Rectangle</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">Width</span> <span class="p">-</span> <span class="m">1</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">Height</span> <span class="p">-</span> <span class="m">1</span><span class="p">);</span>

            <span class="n">Brush</span> <span class="n">b</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">LinearGradientBrush</span><span class="p">(</span><span class="n">gradientRectangle</span><span class="p">,</span> <span class="n">Color</span><span class="p">.</span><span class="n">DarkSlateBlue</span><span class="p">,</span> <span class="n">Color</span><span class="p">.</span><span class="n">MediumPurple</span><span class="p">,</span> <span class="m">0.0f</span><span class="p">);</span>

            <span class="n">graphics</span><span class="p">.</span><span class="n">SmoothingMode</span> <span class="p">=</span> <span class="n">SmoothingMode</span><span class="p">.</span><span class="n">HighQuality</span><span class="p">;</span>

            <span class="n">RoundedRectangle</span><span class="p">.</span><span class="nf">FillRoundedRectangle</span><span class="p">(</span><span class="n">graphics</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">gradientRectangle</span><span class="p">,</span> <span class="m">35</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">base</span><span class="p">.</span><span class="nf">OnPaint</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
    <span class="p">}</span>


    <span class="k">protected</span> <span class="k">override</span> <span class="n">CreateParams</span> <span class="n">CreateParams</span>
    <span class="p">{</span>
        <span class="k">get</span>
        <span class="p">{</span>
            <span class="n">CreateParams</span> <span class="n">cp</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="n">CreateParams</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(!</span><span class="n">DesignMode</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">cp</span><span class="p">.</span><span class="n">ExStyle</span> <span class="p">|=</span> <span class="m">0x00080000</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="n">cp</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">RoundedRectangle</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="n">GraphicsPath</span> <span class="nf">RoundedRect</span><span class="p">(</span><span class="n">Rectangle</span> <span class="n">bounds</span><span class="p">,</span> <span class="kt">int</span> <span class="n">radius</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">diameter</span> <span class="p">=</span> <span class="n">radius</span> <span class="p">*</span> <span class="m">2</span><span class="p">;</span>
        <span class="n">Size</span> <span class="n">size</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Size</span><span class="p">(</span><span class="n">diameter</span><span class="p">,</span> <span class="n">diameter</span><span class="p">);</span>
        <span class="n">Rectangle</span> <span class="n">arc</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Rectangle</span><span class="p">(</span><span class="n">bounds</span><span class="p">.</span><span class="n">Location</span><span class="p">,</span> <span class="n">size</span><span class="p">);</span>
        <span class="n">GraphicsPath</span> <span class="n">path</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">GraphicsPath</span><span class="p">();</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">radius</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">path</span><span class="p">.</span><span class="nf">AddRectangle</span><span class="p">(</span><span class="n">bounds</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">path</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">// top left arc  </span>
        <span class="n">path</span><span class="p">.</span><span class="nf">AddArc</span><span class="p">(</span><span class="n">arc</span><span class="p">,</span> <span class="m">180</span><span class="p">,</span> <span class="m">90</span><span class="p">);</span>

        <span class="c1">// top right arc  </span>
        <span class="n">arc</span><span class="p">.</span><span class="n">X</span> <span class="p">=</span> <span class="n">bounds</span><span class="p">.</span><span class="n">Right</span> <span class="p">-</span> <span class="n">diameter</span><span class="p">;</span>
        <span class="n">path</span><span class="p">.</span><span class="nf">AddArc</span><span class="p">(</span><span class="n">arc</span><span class="p">,</span> <span class="m">270</span><span class="p">,</span> <span class="m">90</span><span class="p">);</span>

        <span class="c1">// bottom right arc  </span>
        <span class="n">arc</span><span class="p">.</span><span class="n">Y</span> <span class="p">=</span> <span class="n">bounds</span><span class="p">.</span><span class="n">Bottom</span> <span class="p">-</span> <span class="n">diameter</span><span class="p">;</span>
        <span class="n">path</span><span class="p">.</span><span class="nf">AddArc</span><span class="p">(</span><span class="n">arc</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">90</span><span class="p">);</span>

        <span class="c1">// bottom left arc </span>
        <span class="n">arc</span><span class="p">.</span><span class="n">X</span> <span class="p">=</span> <span class="n">bounds</span><span class="p">.</span><span class="n">Left</span><span class="p">;</span>
        <span class="n">path</span><span class="p">.</span><span class="nf">AddArc</span><span class="p">(</span><span class="n">arc</span><span class="p">,</span> <span class="m">90</span><span class="p">,</span> <span class="m">90</span><span class="p">);</span>

        <span class="n">path</span><span class="p">.</span><span class="nf">CloseFigure</span><span class="p">();</span>
        <span class="k">return</span> <span class="n">path</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">FillRoundedRectangle</span><span class="p">(</span><span class="n">Graphics</span> <span class="n">graphics</span><span class="p">,</span> <span class="n">Brush</span> <span class="n">brush</span><span class="p">,</span> <span class="n">Rectangle</span> <span class="n">bounds</span><span class="p">,</span> <span class="kt">int</span> <span class="n">cornerRadius</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">graphics</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentNullException</span><span class="p">(</span><span class="s">"graphics"</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">brush</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentNullException</span><span class="p">(</span><span class="s">"brush"</span><span class="p">);</span>

        <span class="k">using</span> <span class="p">(</span><span class="n">GraphicsPath</span> <span class="n">path</span> <span class="p">=</span> <span class="nf">RoundedRect</span><span class="p">(</span><span class="n">bounds</span><span class="p">,</span> <span class="n">cornerRadius</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="n">graphics</span><span class="p">.</span><span class="nf">FillPath</span><span class="p">(</span><span class="n">brush</span><span class="p">,</span> <span class="n">path</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">internal</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">PerPixelAlphaBlend</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">SetBitmap</span><span class="p">(</span><span class="n">Bitmap</span> <span class="n">bitmap</span><span class="p">,</span> <span class="kt">int</span> <span class="n">left</span><span class="p">,</span> <span class="kt">int</span> <span class="n">top</span><span class="p">,</span> <span class="n">IntPtr</span> <span class="n">handle</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nf">SetBitmap</span><span class="p">(</span><span class="n">bitmap</span><span class="p">,</span> <span class="m">255</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">top</span><span class="p">,</span> <span class="n">handle</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">SetBitmap</span><span class="p">(</span><span class="n">Bitmap</span> <span class="n">bitmap</span><span class="p">,</span> <span class="kt">byte</span> <span class="n">opacity</span><span class="p">,</span> <span class="kt">int</span> <span class="n">left</span><span class="p">,</span> <span class="kt">int</span> <span class="n">top</span><span class="p">,</span> <span class="n">IntPtr</span> <span class="n">handle</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">bitmap</span><span class="p">.</span><span class="n">PixelFormat</span> <span class="p">!=</span> <span class="n">PixelFormat</span><span class="p">.</span><span class="n">Format32bppArgb</span><span class="p">)</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">ApplicationException</span><span class="p">(</span><span class="s">"The bitmap must be 32ppp with alpha-channel."</span><span class="p">);</span>


        <span class="n">IntPtr</span> <span class="n">screenDc</span> <span class="p">=</span> <span class="n">Win32</span><span class="p">.</span><span class="nf">GetDC</span><span class="p">(</span><span class="n">IntPtr</span><span class="p">.</span><span class="n">Zero</span><span class="p">);</span>
        <span class="n">IntPtr</span> <span class="n">memDc</span> <span class="p">=</span> <span class="n">Win32</span><span class="p">.</span><span class="nf">CreateCompatibleDC</span><span class="p">(</span><span class="n">screenDc</span><span class="p">);</span>
        <span class="n">IntPtr</span> <span class="n">hBitmap</span> <span class="p">=</span> <span class="n">IntPtr</span><span class="p">.</span><span class="n">Zero</span><span class="p">;</span>
        <span class="n">IntPtr</span> <span class="n">oldBitmap</span> <span class="p">=</span> <span class="n">IntPtr</span><span class="p">.</span><span class="n">Zero</span><span class="p">;</span>

        <span class="k">try</span>
        <span class="p">{</span>
            <span class="n">hBitmap</span> <span class="p">=</span> <span class="n">bitmap</span><span class="p">.</span><span class="nf">GetHbitmap</span><span class="p">(</span><span class="n">Color</span><span class="p">.</span><span class="nf">FromArgb</span><span class="p">(</span><span class="m">0</span><span class="p">));</span>
            <span class="n">oldBitmap</span> <span class="p">=</span> <span class="n">Win32</span><span class="p">.</span><span class="nf">SelectObject</span><span class="p">(</span><span class="n">memDc</span><span class="p">,</span> <span class="n">hBitmap</span><span class="p">);</span>

            <span class="n">Win32</span><span class="p">.</span><span class="n">Size</span> <span class="n">size</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Win32</span><span class="p">.</span><span class="nf">Size</span><span class="p">(</span><span class="n">bitmap</span><span class="p">.</span><span class="n">Width</span><span class="p">,</span> <span class="n">bitmap</span><span class="p">.</span><span class="n">Height</span><span class="p">);</span>
            <span class="n">Win32</span><span class="p">.</span><span class="n">Point</span> <span class="n">pointSource</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Win32</span><span class="p">.</span><span class="nf">Point</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
            <span class="n">Win32</span><span class="p">.</span><span class="n">Point</span> <span class="n">topPos</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Win32</span><span class="p">.</span><span class="nf">Point</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">top</span><span class="p">);</span>
            <span class="n">Win32</span><span class="p">.</span><span class="n">BLENDFUNCTION</span> <span class="n">blend</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Win32</span><span class="p">.</span><span class="nf">BLENDFUNCTION</span><span class="p">();</span>
            <span class="n">blend</span><span class="p">.</span><span class="n">BlendOp</span> <span class="p">=</span> <span class="n">Win32</span><span class="p">.</span><span class="n">AC_SRC_OVER</span><span class="p">;</span>
            <span class="n">blend</span><span class="p">.</span><span class="n">BlendFlags</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
            <span class="n">blend</span><span class="p">.</span><span class="n">SourceConstantAlpha</span> <span class="p">=</span> <span class="n">opacity</span><span class="p">;</span>
            <span class="n">blend</span><span class="p">.</span><span class="n">AlphaFormat</span> <span class="p">=</span> <span class="n">Win32</span><span class="p">.</span><span class="n">AC_SRC_ALPHA</span><span class="p">;</span>

            <span class="n">Win32</span><span class="p">.</span><span class="nf">UpdateLayeredWindow</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">screenDc</span><span class="p">,</span> <span class="k">ref</span> <span class="n">topPos</span><span class="p">,</span> <span class="k">ref</span> <span class="n">size</span><span class="p">,</span> <span class="n">memDc</span><span class="p">,</span> <span class="k">ref</span> <span class="n">pointSource</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="k">ref</span> <span class="n">blend</span><span class="p">,</span> <span class="n">Win32</span><span class="p">.</span><span class="n">ULW_ALPHA</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">finally</span>
        <span class="p">{</span>
            <span class="n">Win32</span><span class="p">.</span><span class="nf">ReleaseDC</span><span class="p">(</span><span class="n">IntPtr</span><span class="p">.</span><span class="n">Zero</span><span class="p">,</span> <span class="n">screenDc</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">hBitmap</span> <span class="p">!=</span> <span class="n">IntPtr</span><span class="p">.</span><span class="n">Zero</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">Win32</span><span class="p">.</span><span class="nf">SelectObject</span><span class="p">(</span><span class="n">memDc</span><span class="p">,</span> <span class="n">oldBitmap</span><span class="p">);</span>
                <span class="n">Win32</span><span class="p">.</span><span class="nf">DeleteObject</span><span class="p">(</span><span class="n">hBitmap</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="n">Win32</span><span class="p">.</span><span class="nf">DeleteDC</span><span class="p">(</span><span class="n">memDc</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">internal</span> <span class="k">class</span> <span class="nc">Win32</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">enum</span> <span class="n">Bool</span>
    <span class="p">{</span>
        <span class="n">False</span> <span class="p">=</span> <span class="m">0</span><span class="p">,</span>
        <span class="n">True</span>
    <span class="p">};</span>


    <span class="p">[</span><span class="nf">StructLayout</span><span class="p">(</span><span class="n">LayoutKind</span><span class="p">.</span><span class="n">Sequential</span><span class="p">)]</span>
    <span class="k">public</span> <span class="k">struct</span> <span class="nc">Point</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">Int32</span> <span class="n">x</span><span class="p">;</span>
        <span class="k">public</span> <span class="n">Int32</span> <span class="n">y</span><span class="p">;</span>

        <span class="k">public</span> <span class="nf">Point</span><span class="p">(</span><span class="n">Int32</span> <span class="n">x</span><span class="p">,</span> <span class="n">Int32</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="n">x</span> <span class="p">=</span> <span class="n">x</span><span class="p">;</span> <span class="k">this</span><span class="p">.</span><span class="n">y</span> <span class="p">=</span> <span class="n">y</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">}</span>


    <span class="p">[</span><span class="nf">StructLayout</span><span class="p">(</span><span class="n">LayoutKind</span><span class="p">.</span><span class="n">Sequential</span><span class="p">)]</span>
    <span class="k">public</span> <span class="k">struct</span> <span class="nc">Size</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">Int32</span> <span class="n">cx</span><span class="p">;</span>
        <span class="k">public</span> <span class="n">Int32</span> <span class="n">cy</span><span class="p">;</span>

        <span class="k">public</span> <span class="nf">Size</span><span class="p">(</span><span class="n">Int32</span> <span class="n">cx</span><span class="p">,</span> <span class="n">Int32</span> <span class="n">cy</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="n">cx</span> <span class="p">=</span> <span class="n">cx</span><span class="p">;</span> <span class="k">this</span><span class="p">.</span><span class="n">cy</span> <span class="p">=</span> <span class="n">cy</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">}</span>


    <span class="p">[</span><span class="nf">StructLayout</span><span class="p">(</span><span class="n">LayoutKind</span><span class="p">.</span><span class="n">Sequential</span><span class="p">,</span> <span class="n">Pack</span> <span class="p">=</span> <span class="m">1</span><span class="p">)]</span>
    <span class="k">struct</span> <span class="nc">ARGB</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">byte</span> <span class="n">Blue</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">byte</span> <span class="n">Green</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">byte</span> <span class="n">Red</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">byte</span> <span class="n">Alpha</span><span class="p">;</span>
    <span class="p">}</span>


    <span class="p">[</span><span class="nf">StructLayout</span><span class="p">(</span><span class="n">LayoutKind</span><span class="p">.</span><span class="n">Sequential</span><span class="p">,</span> <span class="n">Pack</span> <span class="p">=</span> <span class="m">1</span><span class="p">)]</span>
    <span class="k">public</span> <span class="k">struct</span> <span class="nc">BLENDFUNCTION</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">byte</span> <span class="n">BlendOp</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">byte</span> <span class="n">BlendFlags</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">byte</span> <span class="n">SourceConstantAlpha</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">byte</span> <span class="n">AlphaFormat</span><span class="p">;</span>
    <span class="p">}</span>


    <span class="k">public</span> <span class="k">const</span> <span class="n">Int32</span> <span class="n">ULW_COLORKEY</span> <span class="p">=</span> <span class="m">0x00000001</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">const</span> <span class="n">Int32</span> <span class="n">ULW_ALPHA</span> <span class="p">=</span> <span class="m">0x00000002</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">const</span> <span class="n">Int32</span> <span class="n">ULW_OPAQUE</span> <span class="p">=</span> <span class="m">0x00000004</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">const</span> <span class="kt">byte</span> <span class="n">AC_SRC_OVER</span> <span class="p">=</span> <span class="m">0x00</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">const</span> <span class="kt">byte</span> <span class="n">AC_SRC_ALPHA</span> <span class="p">=</span> <span class="m">0x01</span><span class="p">;</span>


    <span class="p">[</span><span class="nf">DllImport</span><span class="p">(</span><span class="s">"user32.dll"</span><span class="p">,</span> <span class="n">ExactSpelling</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="n">SetLastError</span> <span class="p">=</span> <span class="k">true</span><span class="p">)]</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">extern</span> <span class="n">Bool</span> <span class="nf">UpdateLayeredWindow</span><span class="p">(</span><span class="n">IntPtr</span> <span class="n">hwnd</span><span class="p">,</span> <span class="n">IntPtr</span> <span class="n">hdcDst</span><span class="p">,</span> <span class="k">ref</span> <span class="n">Point</span> <span class="n">pptDst</span><span class="p">,</span> <span class="k">ref</span> <span class="n">Size</span> <span class="n">psize</span><span class="p">,</span> <span class="n">IntPtr</span> <span class="n">hdcSrc</span><span class="p">,</span> <span class="k">ref</span> <span class="n">Point</span> <span class="n">pprSrc</span><span class="p">,</span> <span class="n">Int32</span> <span class="n">crKey</span><span class="p">,</span> <span class="k">ref</span> <span class="n">BLENDFUNCTION</span> <span class="n">pblend</span><span class="p">,</span> <span class="n">Int32</span> <span class="n">dwFlags</span><span class="p">);</span>

    <span class="p">[</span><span class="nf">DllImport</span><span class="p">(</span><span class="s">"user32.dll"</span><span class="p">,</span> <span class="n">ExactSpelling</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="n">SetLastError</span> <span class="p">=</span> <span class="k">true</span><span class="p">)]</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">extern</span> <span class="n">IntPtr</span> <span class="nf">GetDC</span><span class="p">(</span><span class="n">IntPtr</span> <span class="n">hWnd</span><span class="p">);</span>

    <span class="p">[</span><span class="nf">DllImport</span><span class="p">(</span><span class="s">"user32.dll"</span><span class="p">,</span> <span class="n">ExactSpelling</span> <span class="p">=</span> <span class="k">true</span><span class="p">)]</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">extern</span> <span class="kt">int</span> <span class="nf">ReleaseDC</span><span class="p">(</span><span class="n">IntPtr</span> <span class="n">hWnd</span><span class="p">,</span> <span class="n">IntPtr</span> <span class="n">hDC</span><span class="p">);</span>

    <span class="p">[</span><span class="nf">DllImport</span><span class="p">(</span><span class="s">"gdi32.dll"</span><span class="p">,</span> <span class="n">ExactSpelling</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="n">SetLastError</span> <span class="p">=</span> <span class="k">true</span><span class="p">)]</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">extern</span> <span class="n">IntPtr</span> <span class="nf">CreateCompatibleDC</span><span class="p">(</span><span class="n">IntPtr</span> <span class="n">hDC</span><span class="p">);</span>

    <span class="p">[</span><span class="nf">DllImport</span><span class="p">(</span><span class="s">"gdi32.dll"</span><span class="p">,</span> <span class="n">ExactSpelling</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="n">SetLastError</span> <span class="p">=</span> <span class="k">true</span><span class="p">)]</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">extern</span> <span class="n">Bool</span> <span class="nf">DeleteDC</span><span class="p">(</span><span class="n">IntPtr</span> <span class="n">hdc</span><span class="p">);</span>

    <span class="p">[</span><span class="nf">DllImport</span><span class="p">(</span><span class="s">"gdi32.dll"</span><span class="p">,</span> <span class="n">ExactSpelling</span> <span class="p">=</span> <span class="k">true</span><span class="p">)]</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">extern</span> <span class="n">IntPtr</span> <span class="nf">SelectObject</span><span class="p">(</span><span class="n">IntPtr</span> <span class="n">hDC</span><span class="p">,</span> <span class="n">IntPtr</span> <span class="n">hObject</span><span class="p">);</span>

    <span class="p">[</span><span class="nf">DllImport</span><span class="p">(</span><span class="s">"gdi32.dll"</span><span class="p">,</span> <span class="n">ExactSpelling</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="n">SetLastError</span> <span class="p">=</span> <span class="k">true</span><span class="p">)]</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">extern</span> <span class="n">Bool</span> <span class="nf">DeleteObject</span><span class="p">(</span><span class="n">IntPtr</span> <span class="n">hObject</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div></div></details><p>위의 코드를 넣고 <code class="language-plaintext highlighter-rouge">public partial class Form1 : HotkeyRoundedForm</code> 이런식으로<code class="language-plaintext highlighter-rouge">HotkeyRoundedForm</code> 을 상속받아 사용하면 된다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/dev/'>dev</a>, <a href='/categories/stackoverflow/'>stackoverflow</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/dev/" class="post-tag no-text-decoration" >dev</a> <a href="/tags/stackoverflow/" class="post-tag no-text-decoration" >stackoverflow</a> <a href="/tags/csharp/" class="post-tag no-text-decoration" >csharp</a> <a href="/tags/winforms/" class="post-tag no-text-decoration" >winforms</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=winforms 에서 부드러운 둥근 모서리 만들기 - Hotkey&amp;url=https://hotkey.sh/posts/smooth-rounded-corners-in-winform/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=winforms 에서 부드러운 둥근 모서리 만들기 - Hotkey&amp;u=https://hotkey.sh/posts/smooth-rounded-corners-in-winform/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://hotkey.sh/posts/smooth-rounded-corners-in-winform/&amp;text=winforms 에서 부드러운 둥근 모서리 만들기 - Hotkey" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/%E5%87%AA%E8%91%B5-%E7%A9%BA%E3%81%8C%E5%87%AA%E3%81%84%E3%81%A0%E3%82%89(%EA%B3%A0%EC%9A%94%ED%95%9C-%EB%92%A4%EC%97%90)/">凪葵 - 空が凪いだら(고요한 뒤에) 가사</a><li><a href="/posts/url-shortener/">s3를 이용하여 단축 Url 서비스 만들기</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/dev/">dev</a> <a class="post-tag" href="/tags/csharp/">csharp</a> <a class="post-tag" href="/tags/lyrics/">lyrics</a> <a class="post-tag" href="/tags/music/">music</a> <a class="post-tag" href="/tags/project/">project</a> <a class="post-tag" href="/tags/stackoverflow/">stackoverflow</a> <a class="post-tag" href="/tags/translate/">translate</a> <a class="post-tag" href="/tags/winforms/">winforms</a> <a class="post-tag" href="/tags/%E5%87%AA%E8%91%B5/">凪葵</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/url-shortener/"><div class="card-body"> <em class="timeago small" date="2022-01-26T09:56:00+09:00" >Jan 26, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>s3를 이용하여 단축 Url 서비스 만들기</h3><div class="text-muted small"><p> 만들게 된 이유 필자는 코드 공유시 tio.run 라는 사이트를 주로 사용한다. 지원하는 언어의 수도 많고 디자인도 심플해서 자주 사용하는데 공유 기능을 사용할때 문제가 생겼다. 공유시 주소에 인코딩한 코드를 넣는 방식이라 주소가 너무 길어진다는것이다. 이런 문제 해결을 위해서 url 단축기를 만들기로 했다. url 단축 방식 url 단축기를...</p></div></div></a></div><div class="card"> <a href="/posts/%E5%87%AA%E8%91%B5-%E7%A9%BA%E3%81%8C%E5%87%AA%E3%81%84%E3%81%A0%E3%82%89(%EA%B3%A0%EC%9A%94%ED%95%9C-%EB%92%A4%EC%97%90)/"><div class="card-body"> <em class="timeago small" date="2024-08-06T23:17:57+09:00" >Aug 6</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>凪葵 - 空が凪いだら(고요한 뒤에) 가사</h3><div class="text-muted small"><p> 空っぽな今日からきっと逃れたくて 카랏포나 쿄오카라 킷토 노가레타쿠테 텅 빈 오늘로부터 분명 벗어나고 싶어서 目指した雲 메자시타 쿠모 목표로 한 구름 がらんどうな僕はみっともないな 가란도오나 보쿠와 밋토모나이나 텅 빈 나는 보기 흉하네 きっと誓うよ空に 킷토 치카우요 소라니 반드시 맹세할게 하늘에 もう怖くないこと 모오 코와쿠 나이 코토 더 이상...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <span class="btn btn-outline-primary disabled" prompt="Older"><p>-</p></span> <a href="/posts/url-shortener/" class="btn btn-outline-primary" prompt="Newer"><p>s3를 이용하여 단축 Url 서비스 만들기</p></a></div><script src="https://utteranc.es/client.js" repo="Hot-key/hot-key.github.io" issue-term="pathname" crossorigin="anonymous" async> </script> <script type="text/javascript"> $(function() { const origin = "https://utteranc.es"; const iframe = "iframe.utterances-frame"; const lightTheme = "github-light"; const darkTheme = "github-dark"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } addEventListener("message", (event) => { let theme; /* credit to <https://github.com/utterance/utterances/issues/170#issuecomment-594036347> */ if (event.origin === origin) { /* page initial */ theme = initTheme; } else if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); } else { return; } const message = { type: "set-theme", theme: theme }; const utterances = document.querySelector(iframe).contentWindow; utterances.postMessage(message, origin); }); }); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://github.com/Hot-key">Hotkey</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/dev/">dev</a> <a class="post-tag" href="/tags/csharp/">csharp</a> <a class="post-tag" href="/tags/lyrics/">lyrics</a> <a class="post-tag" href="/tags/music/">music</a> <a class="post-tag" href="/tags/project/">project</a> <a class="post-tag" href="/tags/stackoverflow/">stackoverflow</a> <a class="post-tag" href="/tags/translate/">translate</a> <a class="post-tag" href="/tags/winforms/">winforms</a> <a class="post-tag" href="/tags/%E5%87%AA%E8%91%B5/">凪葵</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script>
